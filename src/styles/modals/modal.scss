@use '../variables/fonts/fonts.scss' as font;
@use '../variables/utillities/utils.scss' as util;
@use '../variables/colors/colors.scss' as colors;

.modal-dialog {
  max-width: 30rem;
  width: calc(100% - 2rem);
  margin: 1rem auto;
  padding: 0;

  .modal-content {
    border-radius: 0;
    background-color: colors.colorTheme(burntOrange);
    padding: 0.5rem;
    box-sizing: border-box;
    min-height: 34rem;
    .modal-container {
      @include util.modal-container-style;

      .modal-content {
        @include util.modal-content-style;

        .modal-header {
          @include util.flex-center;
          justify-content: space-between;
          padding: 1rem;
          .modal-title {
            line-height: 1;
            font-size: 1.125rem;
            color: colors.colorTheme(burntOrange);
          }
          .pomade-logo {
            width: 3rem;
            height: 3rem;
          }

          .btn-close {
            @include util.close-button-style(colors.colorTheme(appWhite), null, colors.colorTheme(appBlack));
            margin: 0;
          }
        }

        .sale-modal-body {
          color: colors.colorTheme(appWhite);
          // Reduce height to fit within viewport, adjust as needed
          max-height: calc(100vh - 120px); // 120px could be your header height plus some padding
          overflow-y: auto;
          padding: 1rem;

          .animate-div {
            @include util.flex-center;

            .product-card, .cart-product-card {
              width: 100%;
              height: auto; // Ensure content fits within given space
              @include util.grid-layout(1fr, auto, 1rem);
              border: none;
              border-radius: 0;

              .product-img {
                width: 7rem;
                height: 7rem;
                max-width: 100%;
                align-self: center;
                justify-self: center;
              }

              .product-title {
                display: flex;
                gap: 0.5rem;
                justify-self: center;
              }
            }

            .product-card {
              grid-template-rows: repeat(3, minmax(min-content,max-content));
              align-items: center;
              justify-content: center;
              .cart-items {
                display: flex;
                align-items: center;
                justify-content: center;
                position: relative;
                gap: 1rem;
                .cart-count {
                  position: absolute;
                  top: 0;
                  left: 5.35rem;
                  color: colors.colorTheme(burntOrange);
                }
                .cart-btn {
                  @include util.cart-button();
                }
              }
              .product-details {
                display: flex;
                flex-direction: column;
                align-items: center;
                text-align: center;
                gap: 0.5rem;

                .product-btn {
                  @include util.product-button();
                }
              }
            }

            .cart-product-card {
              grid-template-rows: repeat(4, auto); 
              justify-items: center;
              align-items: start;
              @media (min-width: 768px) {
                gap: 1.5rem;
              }

              .cart-details {
                @include util.grid-layout(repeat(3, minmax(min-content,max-content)), auto, 0.5rem); 
                justify-content: center;
                align-content: start;
                row-gap: 0.5rem;

                .cart-items {
                  @include util.grid-layout(1fr, repeat(2, minmax(min-content, max-content)), 0.25rem); 
                  text-align: center;

                  @media (max-width: 767px) {
                    padding: 0.25rem;
                    gap: 0.5rem; 
                  }
                }

                .quantity-control {
                  grid-column: 1 / span 3;
                  @include util.grid-layout(repeat(3,1fr), auto, 0.25rem); 
                  justify-self: center;
                  .cart-count {
                    align-self: center;
                    justify-self: center;
                  }
                  .quantity-btn {
                    @include util.count-button();
                  }
                }

                .cart-form {
                  grid-column: 1 / span 3;
                  display: flex;
                  flex-direction: column;
                  align-items: center;
                  justify-content: center;
                  gap: 0.5rem;
                  padding-bottom: 0.5rem; 

                  .cart-check {
                    @include util.flex-center;
                    justify-content: flex-start;
                    gap: 0.3rem; 

                    .term-link {
                      color: colors.colorTheme(burntOrange);
                      text-decoration-color: colors.colorTheme(appWhite);
                      text-underline-offset: 6px;
                      &:hover {
                        color: colors.colorTheme(appWhite);
                        text-decoration-color: colors.colorTheme(appBlack); 
                      }
                    }
                  }

                  .cart-buttons {
                    @include util.flex-center;
                    @media (max-width: 767px) {
                      flex-direction: column;
                      align-items: center;
                      gap: 0.3rem;
                    }
                  }

                  .cart-btn {
                    @include util.cart-button();
                    margin-top: 1rem;
                  }
                }
              }
            }
          }
        }
      }
    }
  }
}

@media (max-width: 376px) {
  .modal-dialog {
    width: calc(100% - 1rem);
  }
}